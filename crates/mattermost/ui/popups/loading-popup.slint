export component LoadingPopup inherits Rectangle {
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);

    Rectangle {
        width: 300px;
        height: 200px;
        x: (parent.width - self.width) / 2;
        y: (parent.height - self.height) / 2;
        background: #2a2a2a;
        border-radius: 16px;
        border-width: 1px;
        border-color: #404040;

        VerticalLayout {
            padding: 32px;
            spacing: 24px;
            alignment: center;

            Rectangle {
                width: 100%;
                height: 48px;

                loading-dots := Rectangle {
                    width: 48px;
                    height: 8px;
                    x: (parent.width - self.width) / 2;
                    y: (parent.height - self.height) / 2;

                    property <int> animation-phase: 0;
                    
                    Timer {
                        interval: 400ms;
                        running: true;
                        triggered => {
                            animation-phase = Math.mod(animation-phase + 1, 3);
                            self.restart();
                        }
                    }

                    dot1 := Rectangle {
                        width: 8px;
                        height: 8px;
                        border-radius: 4px;
                        background: #f5f5f5;
                        x: 4px;
                        opacity: animation-phase == 0 ? 1.0 : 0.3;
                        animate opacity { duration: 200ms; easing: ease-in-out; }
                    }

                    dot2 := Rectangle {
                        width: 8px;
                        height: 8px;
                        border-radius: 4px;
                        background: #f5f5f5;
                        x: 20px;
                        opacity: animation-phase == 1 ? 1.0 : 0.3;
                        animate opacity { duration: 200ms; easing: ease-in-out; }
                    }

                    dot3 := Rectangle {
                        width: 8px;
                        height: 8px;
                        border-radius: 4px;
                        background: #f5f5f5;
                        x: 36px;
                        opacity: animation-phase == 2 ? 1.0 : 0.3;
                        animate opacity { duration: 200ms; easing: ease-in-out; }
                    }
                }
            }

            Text {
                text: "Loading...";
                color: #f5f5f5;
                font-size: 18px;
                font-weight: 500;
                horizontal-alignment: center;
            }
        }
    }
}