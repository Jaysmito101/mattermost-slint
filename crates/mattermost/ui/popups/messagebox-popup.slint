import { PrimaryButton } from "../components/primary-button.slint";
import { MessageBoxData } from "../store.slint";

export component MessageBoxPopup inherits Rectangle {
    in property <MessageBoxData> data;
    callback callback-ok-clicked();
    callback callback-cancel-clicked();
    callback callback-retry-clicked();

    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);

    Rectangle {
        width: min(400px, parent.width - 64px);
        height: content-layout.preferred-height + 64px;
        x: (parent.width - self.width) / 2;
        y: (parent.height - self.height) / 2;
        background: #2a2a2a;
        border-radius: 16px;
        border-width: 1px;
        border-color: data.is_error ? #cc4444 : #404040;

        content-layout := VerticalLayout {
            padding: 32px;
            spacing: 24px;

            Text {
                text: data.title;
                color: data.is_error ? #ff6666 : #f5f5f5;
                font-size: 20px;
                font-weight: 600;
                horizontal-alignment: center;
                wrap: word-wrap;
            }

            Text {
                text: data.message;
                color: #d0d0d0;
                font-size: 16px;
                font-weight: 400;
                horizontal-alignment: center;
                wrap: word-wrap;
            }

            HorizontalLayout {
                spacing: 16px;
                alignment: center;

                if data.is_error: Rectangle {
                    width: 100px;
                    height: 40px;
                    border-radius: 20px;
                    background: #444444;
                    border-width: 1px;
                    border-color: #666666;

                    Text {
                        text: "Cancel";
                        color: #f5f5f5;
                        font-size: 14px;
                        font-weight: 500;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                    }

                    TouchArea {
                        width: parent.width;
                        height: parent.height;
                        clicked => { root.callback-cancel-clicked(); }
                    }
                }

                if data.is_error: Rectangle {
                    width: 100px;
                    height: 40px;
                    border-radius: 20px;
                    background: @linear-gradient(90deg, #6666cc, #8888dd);

                    Text {
                        text: "Retry";
                        color: #ffffff;
                        font-size: 14px;
                        font-weight: 500;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                    }

                    TouchArea {
                        width: parent.width;
                        height: parent.height;
                        clicked => { root.callback-retry-clicked(); }
                    }
                }

                if !data.is_error: Rectangle {
                    width: 100px;
                    height: 40px;
                    border-radius: 20px;
                    background: @linear-gradient(90deg, #4a4a4a, #676767);

                    Text {
                        text: "OK";
                        color: #ffffff;
                        font-size: 14px;
                        font-weight: 500;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                    }

                    TouchArea {
                        width: parent.width;
                        height: parent.height;
                        clicked => { root.callback-ok-clicked(); }
                    }
                }
            }
        }
    }
}